global
    daemon
    maxconn 4096
    log stdout local0

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    log global

frontend web_frontend
    bind *:80
    default_backend word_explorer_backend
    
    # Add some basic monitoring
    stats enable
    stats uri /haproxy-stats
    stats refresh 30s
    stats admin if TRUE

backend word_explorer_backend
    balance roundrobin
    option httpchk GET /health
    http-check expect status 200
    
    # Health check every 3 seconds, mark server down after 3 failures, up after 2 successes
    server web01 web01:8080 check inter 3000 rise 2 fall 3
    server web02 web02:8080 check inter 3000 rise 2 fall 3
